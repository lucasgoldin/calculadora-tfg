<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de TFG - CKD-EPI 2021</title>
    <meta name="description" content="Calculadora de TFG baseada na fórmula CKD-EPI 2021. Estime a taxa de filtração glomerular usando creatinina e opcionalmente cistatina C, com ajuste pela superfície corporal. Ferramenta prática para nefrologistas e clínicos.">
    <meta name="keywords" content="calculadora nefrológica, calculadora renal, cálculo taxa de filtração glomerular, cálculo TFG, CKD-EPI, cálculo CKD, função renal, filtração glomerular estimada, estimativa TFG creatinina, cistatina C função renal">
    <meta name="author" content="Lucas Goldin">
</head>
<body>
    <h1>Calculadora de TFG (CKD-EPI 2021)</h1>
    <p>Baseada na creatinina e opcionalmente na cistatina C, com correção pela superfície corporal.</p>
    <form id="formulario">
        <label>Idade (anos): <input type="number" id="idade" required></label><br>
        <label>Sexo:
            <select id="sexo">
                <option value="masculino">Masculino</option>
                <option value="feminino">Feminino</option>
            </select>
        </label><br>
        <label>Creatinina (mg/dL): <input type="number" step="0.01" id="creatinina" required></label><br>
        <label>Cistatina C (mg/L) (opcional): <input type="number" step="0.01" id="cistatina"></label><br>
        <label>Peso (kg): <input type="number" step="0.1" id="peso" required></label><br>
        <label>Altura (cm): <input type="number" step="0.1" id="altura" required></label><br><br>
        <button type="button" onclick="calcularTFG()">Calcular</button>
    </form>
    <div id="resultados"></div>
    <script>
        function calcularTFG() {
            const idade = parseFloat(document.getElementById('idade').value);
            const sexo = document.getElementById('sexo').value;
            const creatinina = parseFloat(document.getElementById('creatinina').value);
            const cistatina = parseFloat(document.getElementById('cistatina').value);
            const peso = parseFloat(document.getElementById('peso').value);
            const altura = parseFloat(document.getElementById('altura').value);
            let k = (sexo === 'feminino') ? 0.7 : 0.9;
            let alpha = (sexo === 'feminino') ? -0.241 : -0.302;
            let fatorSexo = (sexo === 'feminino') ? 1.012 : 1;
            let tfgIndexada = 0;
            if (!isNaN(cistatina)) {
                const minScr = Math.min(creatinina / k, 1);
                const maxScr = Math.max(creatinina / k, 1);
                const minScys = Math.min(cistatina / 0.8, 1);
                const maxScys = Math.max(cistatina / 0.8, 1);
                const sexoFator = (sexo === 'feminino') ? 1.08 : 1;
                tfgIndexada = 135 * Math.pow(minScr, alpha) * Math.pow(maxScr, -0.601)
                    * Math.pow(minScys, -0.375) * Math.pow(maxScys, -0.711)
                    * Math.pow(0.995, idade) * sexoFator;
            } else {
                const minCreat = Math.min(creatinina / k, 1);
                const maxCreat = Math.max(creatinina / k, 1);
                tfgIndexada = 142 * Math.pow(minCreat, alpha) * Math.pow(maxCreat, -1.200)
                    * Math.pow(0.9938, idade) * fatorSexo;
            }
            const superficieCorporal = 0.007184 * Math.pow(peso, 0.425) * Math.pow(altura, 0.725);
            const tfgCorrigida = tfgIndexada * superficieCorporal / 1.73;
            let estagio = '';
            let observacao = '';
            if (tfgCorrigida >= 90) {
                estagio = 'G1 - Função normal';
                observacao = '*Estágios G1 e G2 apenas caracterizam DRC se houver evidência de lesão renal.';
            } else if (tfgCorrigida >= 60) {
                estagio = 'G2 - Leve diminuição';
                observacao = '*Estágios G1 e G2 apenas caracterizam DRC se houver evidência de lesão renal.';
            } else if (tfgCorrigida >= 45) {
                estagio = 'G3a - Diminuição leve a moderada';
            } else if (tfgCorrigida >= 30) {
                estagio = 'G3b - Diminuição moderada a grave';
            } else if (tfgCorrigida >= 15) {
                estagio = 'G4 - Diminuição grave';
            } else {
                estagio = 'G5 - Falência renal';
            }
            document.getElementById('resultados').innerHTML = `
                <h2>Resultado</h2>
                <p><strong>TFG estimada:</strong> ${tfgIndexada.toFixed(1)} mL/min/1,73m²</p>
                <p><strong>Superfície Corporal:</strong> ${superficieCorporal.toFixed(2)} m²</p>
                <p><strong>TFG corrigida:</strong> ${tfgCorrigida.toFixed(1)} mL/min</p>
                <p><strong>Estágio da DRC:</strong> ${estagio}</p>
                ${observacao ? `<p style="font-size: 0.9em; color: #666;">${observacao}</p>` : ''}
            `;
        }
    </script>
</body>
</html>
